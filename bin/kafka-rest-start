#!/bin/bash
#
# Copyright 2018 Confluent Inc.
#
# Licensed under the Confluent Community License (the "License"); you may not use
# this file except in compliance with the License.  You may obtain a copy of the
# License at
#
# http://www.confluent.io/confluent-community-license
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OF ANY KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations under the License.
#

for i in `seq 20`; do
    sleep 1
    $(dirname $0)/kafka-rest-status >/dev/null 2>&1
    if [ $? -eq 0 ]; then
        echo "Kafka REST is already running. "
        exit 0
    fi
done
nohup $(dirname $0)/kafka-rest-run-class io.confluent.kafkarest.KafkaRestMain "$@" </dev/null >/dev/null 2>&1 &
